{# This component is based on Alpine UI Components Dialog Flyout #}
{% load component_tags svg_tags %}
{% require_script "js/alpine/composables/utils.js" %}
{% require_script "js/alpine/composables/dialog.js" %}
{% require_script "js/alpine/plugins/focus@3.14.8" defer=True %}
{% require_script "js/alpine/plugins/ui@3.14.8" defer=True %}

<c-vars request dialog_class="" panel_class="" class=""></c-vars>

<div x-data="dialog" x-id="dialogIdGroup" class="flex justify-center {{ class }}">
  <!-- Trigger -->
  {% if trigger_button %}
    {{ trigger_button }}
  {% else %}
    <c-dialog.trigger-button>
      {{ button_content }}
    </c-dialog.trigger-button>
  {% endif %}

  <!-- Dialog -->
  <div
    x-dialog
    x-bind:open="isOpen"
    x-on:keyup.esc.stop.prevent="close"
    x-bind:id="dialogId"
    role="dialog"
    aria-modal="true"
    x-cloak
    class="fixed z-40 inset-0 overflow-hidden flex justify-center {{ dialog_class }}"
  >
    <!-- Overlay -->
    <div
      x-dialog:overlay
      x-on:click.stop.prevent="close"
      class="fixed z-40 inset-0 bg-greyscale-600/40"
    ></div>

    <!-- Panel -->
    <div
      class="w-full flex flex-col bg-white shadow-md z-50 {{ panel_class }}"
      x-dialog:panel
      x-show="isOpen"
    >
      {{ panel }}
    </div>
  </div>
</div>
