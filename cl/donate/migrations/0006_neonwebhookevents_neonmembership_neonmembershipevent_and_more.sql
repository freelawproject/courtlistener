BEGIN;
--
-- Create model NeonWebhookEvent
--
CREATE TABLE "donate_neonwebhookevent" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "trigger" smallint NOT NULL CHECK ("trigger" >= 0), "account_id" varchar NOT NULL, "membership_id" varchar NOT NULL, "content" jsonb NOT NULL);
--
-- Create model NeonMembership
--
CREATE TABLE "donate_neonmembership" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "neon_id" varchar NOT NULL, "level" smallint NOT NULL CHECK ("level" >= 0), "termination_date" timestamp with time zone NULL, "user_id" integer NOT NULL UNIQUE);
--
-- Create model NeonMembershipEvent
--
CREATE TABLE "donate_neonmembershipevent" ("pgh_id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "pgh_created_at" timestamp with time zone NOT NULL, "pgh_label" text NOT NULL, "id" integer NOT NULL, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "neon_id" varchar NOT NULL, "level" smallint NOT NULL CHECK ("level" >= 0), "termination_date" timestamp with time zone NULL, "pgh_context_id" uuid NULL, "pgh_obj_id" integer NOT NULL, "user_id" integer NOT NULL);

CREATE INDEX "donate_neonwebhookevent_date_created_6dd06f3b" ON "donate_neonwebhookevent" ("date_created");
CREATE INDEX "donate_neonwebhookevent_date_modified_fc85f4c6" ON "donate_neonwebhookevent" ("date_modified");
ALTER TABLE "donate_neonmembership" ADD CONSTRAINT "donate_neonmembership_user_id_c598b2fa_fk_auth_user_id" FOREIGN KEY ("user_id") REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "donate_neonmembership_date_created_6cc7e294" ON "donate_neonmembership" ("date_created");
CREATE INDEX "donate_neonmembership_date_modified_0962bae5" ON "donate_neonmembership" ("date_modified");
CREATE INDEX "donate_neonmembershipevent_pgh_context_id_818e1ef7" ON "donate_neonmembershipevent" ("pgh_context_id");
CREATE INDEX "donate_neonmembershipevent_pgh_obj_id_3dc7ff68" ON "donate_neonmembershipevent" ("pgh_obj_id");
CREATE INDEX "donate_neonmembershipevent_user_id_78401a85" ON "donate_neonmembershipevent" ("user_id");
COMMIT;
