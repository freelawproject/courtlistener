<div id="modal-save-alert"
     class="modal hidden-print"
     role="dialog"
     aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"
                aria-label="Close"><span
                aria-hidden="true">&times;</span></button>
        <h3>
          {% if request.GET.edit_alert %}
            Edit Your Alert&nbsp;<i class="fa fa-pencil gray"></i>
          {% else %}
            Create an Alert&nbsp;<i class="fa fa-bell gold"></i>
          {% endif %}
        </h3>
      </div>
      {% if user.is_authenticated %}
        <div class="modal-body logged-in hidden">
          {% if not request.GET.edit_alert %}
            <p>Get regular notifications about this query by creating an alert. <a href="{% url "alert_help" %}">Learn more&nbsp;<i
                    class="fa fa-question-circle gray"></i></a>
            </p>
          {% endif %}

          <div class="well well-sm">
            <dl class="dl-horizontal bottom">
              {% for label, values in search_summary_dict.items %}
                <dt>{{ label }}</dt>
                <dd>{{ values }}</dd>
              {% endfor %}
            </dl>
          </div>
          <form action="" method="post">{% csrf_token %}
            {{ alert_form.query }}
            <div class="form-group">
              <label for="id_name">Give the alert a name</label>
              {{ alert_form.name }}
              {% if alert_form.name.errors %}
                <p class="help-block">
                  {% for error in alert_form.name.errors %}
                    {{ error|escape }}
                  {% endfor %}
                </p>
              {% endif %}
            </div>

            <div class="form-group">
              <label for="id_rate">How often should we notify you?</label>
              {{ alert_form.rate }}
              {% if alert_form.rate.errors %}
                <p class="help-block">
                  {% for error in alert_form.rate.errors %}
                    {{ error|escape }}
                  {% endfor %}
                </p>
              {% endif %}
            </div>

            {# Hidden unless shown by JS #}
            <div class="alert alert-warning hidden"
                 id="donate-for-rt">
              <p>CourtListener is a project of <a href="https://free.law" target="_blank">Free Law Project</a>, a federally-recognized 501(c)(3) non-profit. <a href="{% url "faq" %}#real-time-alerts" target="_blank">Real Time Alerts</a> are only supported for users that donate at least $10 per year.
              </p>
              <p>Select another option or donate to create this alert.</p>

              <p class="bottom">
                <a href="https://donate.free.law/forms/supportflp"
                   class="btn btn-danger"
                   target="_blank">Donate Now</a>
              </p>
            </div>
            {% if request.GET.edit_alert %}
              {# Used when editing an alert. #}
              <input class="editing-alert"
                     type="hidden"
                     value="{{ request.GET.edit_alert }}"
                     name="edit_alert">
            {% endif %}
            {% if search_form.type.value == SEARCH_TYPES.OPINION %}
              <p class="gray v-offset-above-2">Some jurisdictions do not yet support alerts. Check
                <a href="{% url "coverage" %}#scraped-jurisdictions">our list</a> to be sure your query is supported.
              </p>
            {% elif search_form.type.value == SEARCH_TYPES.ORAL_ARGUMENT %}
              {# No need for statement here. All OA jurisdictions are scraped. #}
            {% elif search_form.type.value == SEARCH_TYPES.RECAP or search_form.type.value == SEARCH_TYPES.DOCKETS %}
              <p class="gray v-offset-above-2">RECAP alerts will only be triggered when there is a new responsive document added to the RECAP Archive. Check out <a href="{% url "coverage" %}#recap-archive">how RECAP content is acquired</a> to learn more.
              </p>
            {% endif %}
            <div class="row v-offset-above-2">
              <div class="hidden-xs col-sm-4" id="alert-estimate">
                <p class="v-offset-above-1"><i class="fa fa-spinner fa-pulse gray"></i><span> Loading alert frequency&hellip;</span></p>
              </div>
              <div class="col-xs-12 col-sm-8">
                <p class="text-right">
                  {% if request.GET.edit_alert %}
                    <a class="btn btn-danger btn-lg" href="{% url "delete_alert_confirm" request.GET.edit_alert %}"><i class="fa fa-trash-o"></i> Delete Alert</a>
                  {% endif %}
                  <button type="submit"
                          class="btn btn-primary btn-lg title"
                          name="alertSave"
                          id="alertSave">
                    <i class="fa fa-bell-o"></i> {% if request.GET.edit_alert %}Save Changes{% else %}Create
                    Alert{% endif %}
                  </button>
                </p>
              </div>
            </div>
          </form>
        </div>
      {% else %}
        {# Anonymous user #}
        <div class="modal-body logged-out">
          <p>To get alerts for this search, <a href="{% url "sign-in" %}?next={{ request.path }}?{{ get_string|urlencode }}page={{ results.number }}">sign in</a> or <a href="{% url "register" %}?next={{ request.path }}?next={{ request.path }}?{{ get_string|urlencode }}page={{ results.number }}">register</a> as a new user.
          </p>
        </div>
      {% endif %}
    </div><!-- end .modal-content -->
  </div><!-- end .modal-dialog -->
</div>
