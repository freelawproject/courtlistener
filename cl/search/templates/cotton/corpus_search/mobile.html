{# This component is based on Alpine UI Components Dialog Flyout #}
{% load component_tags svg_tags %}
{% require_script "js/alpine/composables/dialog.js" %}
{% require_script "js/alpine/plugins/focus@3.14.8" defer=True %}
{% require_script "js/alpine/plugins/ui@3.14.8" defer=True %}

<c-vars request></c-vars>

<div x-data="dialog" class="md:hidden flex justify-center">
  <!-- Trigger -->
  <button x-on:click="open" type="button" class="h-13 w-13 flex justify-center items-center focus-visible:outline-none group">
    <span class="bg-white relative flex items-center justify-center btn-outline text-greyscale-800 rounded-[10px] p-2  group-focus-visible:ring-4 group-focus-visible:ring-greyscale-200">
      {% svg "magnifier" class="text-greyscale-400 w-5 h-5" %}
    </span>
  </button>

  <!-- Dialog -->
  <div
    x-dialog
    x-bind:open="isOpen"
    x-on:close="close"
    x-cloak
    class="fixed inset-0 overflow-hidden z-10"
  >
    <!-- Overlay -->
    <div
      x-dialog:overlay
      class="fixed z-9 inset-0 bg-greyscale-600/40"
    ></div>

    <!-- Panel -->
    <div
      class="w-full absolute flex flex-col bg-white shadow-md pt-0 pb-4 px-3 z-10"
      x-dialog:panel
      x-show="isOpen"
      x-on:click.outside="close"
    >
      <div x-dialog:title class="font-medium text-gray-800 py-3 flex flex-row justify-between">
        <div class="w-[226px] lg:min-w-[226px] flex justify-start" aria-label="Go to homepage">
          <div class="md:h-21 md:w-45 h-12 ml-1 w-[106px]">
            {% svg "logos/courtlistener" %}
          </div>
        </div>
        <div class="pt-1.5">
          <button
            type="button"
            x-on:click="close"
            class="btn-outline p-2 rounded-[10px]"
            aria-label="Close modal"
          >
            {% svg "cross" class="text-greyscale-400" %}
          </button>
        </div>
      </div>

      <div class="flex flex-col gap-2">
        {{ slot }}
      </div>
    </div>
  </div>
</div>
