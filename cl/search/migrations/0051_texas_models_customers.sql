BEGIN;
--
-- Create model CaseTransfer
--
CREATE TABLE "search_casetransfer" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "transfer_date" date NOT NULL, "transfer_type" smallint NOT NULL, "destination_court_id" varchar(15) NOT NULL, "destination_docket_id" integer NOT NULL, "origin_court_id" varchar(15) NOT NULL, "origin_docket_id" integer NOT NULL);
COMMENT ON COLUMN "search_casetransfer"."transfer_date" IS 'The date this transfer occurred.';
COMMENT ON COLUMN "search_casetransfer"."transfer_type" IS 'The type of transfer (appeal, work sharing, etc.).';
COMMENT ON COLUMN "search_casetransfer"."destination_court_id" IS 'The court the docket is being transferred to.';
COMMENT ON COLUMN "search_casetransfer"."destination_docket_id" IS 'The case docket in the destination court.';
COMMENT ON COLUMN "search_casetransfer"."origin_court_id" IS 'The court this transfer originates from.';
COMMENT ON COLUMN "search_casetransfer"."origin_docket_id" IS 'The docket this transfer originates from.';
--
-- Create model TexasDocketEntry
--
CREATE TABLE "search_texasdocketentry" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "appellate_brief" boolean NOT NULL, "description" text NOT NULL, "remarks" text NOT NULL, "disposition" text NOT NULL, "date_filed" date NULL, "entry_type" text NOT NULL, "sequence_number" varchar(16) NOT NULL, "docket_id" integer NOT NULL);
COMMENT ON COLUMN "search_texasdocketentry"."appellate_brief" IS 'Whether this entry appears in the "Appellate Brief" table in TAMES.';
COMMENT ON COLUMN "search_texasdocketentry"."description" IS 'For appellate brief events, a short description of the brief.';
COMMENT ON COLUMN "search_texasdocketentry"."remarks" IS 'Field unique to the Texas Supreme Court allowing commentary and notes on the entry.';
COMMENT ON COLUMN "search_texasdocketentry"."disposition" IS 'Text indicating whether a motion was dismissed, denied, or granted.';
COMMENT ON COLUMN "search_texasdocketentry"."date_filed" IS 'The date that TAMES indicates this entry was filed.';
COMMENT ON COLUMN "search_texasdocketentry"."entry_type" IS 'The type of entry from TAMES.';
COMMENT ON COLUMN "search_texasdocketentry"."sequence_number" IS 'CL-generated field to keep entries in the same order they appear in TAMES. Concatenation of filing date (in ISO format) and the index in the TAMES table.';
COMMENT ON COLUMN "search_texasdocketentry"."docket_id" IS 'The Docket this entry is associated with.';
--
-- Create model TexasDocument
--
CREATE TABLE "search_texasdocument" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "sha1" varchar(40) NOT NULL, "page_count" integer NULL, "file_size" integer NULL, "filepath_local" varchar(1000) NOT NULL, "filepath_ia" varchar(1000) NOT NULL, "ia_upload_failure_count" smallint NULL, "thumbnail" varchar(100) NULL, "thumbnail_status" smallint NOT NULL, "plain_text" text NOT NULL, "ocr_status" smallint NULL, "description" text NOT NULL, "media_id" uuid NOT NULL, "media_version_id" uuid NOT NULL, "document_url" varchar(200) NOT NULL, "docket_entry_id" integer NOT NULL);
COMMENT ON COLUMN "search_texasdocument"."description" IS 'The description of this file in TAMES.';
COMMENT ON COLUMN "search_texasdocument"."media_id" IS 'The MediaID parameter from the download URL that TAMES provided. Used to perform document merging.';
COMMENT ON COLUMN "search_texasdocument"."media_version_id" IS 'The MediaVersionID parameter from the download URL that TAMES provided. Used to perform document merging.';
COMMENT ON COLUMN "search_texasdocument"."document_url" IS 'The download URL that TAMES provided for this document.';
COMMENT ON COLUMN "search_texasdocument"."docket_entry_id" IS 'The Docket this document is associated with.';

--
-- Create index search_texa_media_i_b596e7_idx on field(s) media_id of model texasdocument
--
CREATE INDEX "search_texa_media_i_b596e7_idx" ON "search_texasdocument" ("media_id");
--
-- Create index search_texa_filepat_0b592d_idx on field(s) filepath_local of model texasdocument
--
CREATE INDEX "search_texa_filepat_0b592d_idx" ON "search_texasdocument" ("filepath_local");
--
-- Alter unique_together for texasdocument (1 constraint(s))
--
ALTER TABLE "search_texasdocument" ADD CONSTRAINT "search_texasdocument_docket_entry_id_media_id_08164252_uniq" UNIQUE ("docket_entry_id", "media_id");

ALTER TABLE "search_casetransfer" ADD CONSTRAINT "search_casetransfer_destination_court_id_97ab0d74_fk_search_co" FOREIGN KEY ("destination_court_id") REFERENCES "search_court" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "search_casetransfer" ADD CONSTRAINT "search_casetransfer_destination_docket_i_9941948f_fk_search_do" FOREIGN KEY ("destination_docket_id") REFERENCES "search_docket" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "search_casetransfer" ADD CONSTRAINT "search_casetransfer_origin_court_id_48b56070_fk_search_court_id" FOREIGN KEY ("origin_court_id") REFERENCES "search_court" ("id") DEFERRABLE INITIALLY DEFERRED;
ALTER TABLE "search_casetransfer" ADD CONSTRAINT "search_casetransfer_origin_docket_id_b23a08e9_fk_search_do" FOREIGN KEY ("origin_docket_id") REFERENCES "search_docket" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "search_casetransfer_date_created_ff8094af" ON "search_casetransfer" ("date_created");
CREATE INDEX "search_casetransfer_date_modified_c464cd1c" ON "search_casetransfer" ("date_modified");
CREATE INDEX "search_casetransfer_destination_court_id_97ab0d74" ON "search_casetransfer" ("destination_court_id");
CREATE INDEX "search_casetransfer_destination_court_id_97ab0d74_like" ON "search_casetransfer" ("destination_court_id" varchar_pattern_ops);
CREATE INDEX "search_casetransfer_destination_docket_id_9941948f" ON "search_casetransfer" ("destination_docket_id");
CREATE INDEX "search_casetransfer_origin_court_id_48b56070" ON "search_casetransfer" ("origin_court_id");
CREATE INDEX "search_casetransfer_origin_court_id_48b56070_like" ON "search_casetransfer" ("origin_court_id" varchar_pattern_ops);
CREATE INDEX "search_casetransfer_origin_docket_id_b23a08e9" ON "search_casetransfer" ("origin_docket_id");
ALTER TABLE "search_texasdocketentry" ADD CONSTRAINT "search_texasdocketentry_docket_id_c6bb15bc_fk_search_docket_id" FOREIGN KEY ("docket_id") REFERENCES "search_docket" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "search_texasdocketentry_date_created_5fecc940" ON "search_texasdocketentry" ("date_created");
CREATE INDEX "search_texasdocketentry_date_modified_e8729924" ON "search_texasdocketentry" ("date_modified");
CREATE INDEX "search_texasdocketentry_docket_id_c6bb15bc" ON "search_texasdocketentry" ("docket_id");
ALTER TABLE "search_texasdocument" ADD CONSTRAINT "search_texasdocument_docket_entry_id_ae9b295a_fk_search_te" FOREIGN KEY ("docket_entry_id") REFERENCES "search_texasdocketentry" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "search_texasdocument_date_created_25dd235e" ON "search_texasdocument" ("date_created");
CREATE INDEX "search_texasdocument_date_modified_ed15596c" ON "search_texasdocument" ("date_modified");
CREATE INDEX "search_texasdocument_docket_entry_id_ae9b295a" ON "search_texasdocument" ("docket_entry_id");
COMMIT;
