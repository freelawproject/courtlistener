BEGIN;
--
-- Create model OpinionContent
--
CREATE TABLE "search_opinioncontent" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "content" text NOT NULL, "source" smallint NOT NULL, "extraction_type" smallint NOT NULL, "is_main_version" boolean NOT NULL, "sha1" varchar(40) NOT NULL, "page_count" integer NULL, "download_url" varchar(500) NULL, "local_path" varchar(100) NOT NULL);
--
-- Add field filepath_pdf_scan to opinioncluster
--
ALTER TABLE "search_opinioncluster" ADD COLUMN "filepath_pdf_scan" varchar(100) DEFAULT '' NOT NULL;
ALTER TABLE "search_opinioncluster" ALTER COLUMN "filepath_pdf_scan" DROP DEFAULT;
--
-- Add field filepath_xml_scan to opinioncluster
--
ALTER TABLE "search_opinioncluster" ADD COLUMN "filepath_xml_scan" varchar(100) DEFAULT '' NOT NULL;
ALTER TABLE "search_opinioncluster" ALTER COLUMN "filepath_xml_scan" DROP DEFAULT;
--
-- Add field filepath_pdf_scan to opinionclusterevent
--
ALTER TABLE "search_opinionclusterevent" ADD COLUMN "filepath_pdf_scan" varchar(100) DEFAULT '' NOT NULL;
ALTER TABLE "search_opinionclusterevent" ALTER COLUMN "filepath_pdf_scan" DROP DEFAULT;
--
-- Add field filepath_xml_scan to opinionclusterevent
--
ALTER TABLE "search_opinionclusterevent" ADD COLUMN "filepath_xml_scan" varchar(100) DEFAULT '' NOT NULL;
ALTER TABLE "search_opinionclusterevent" ALTER COLUMN "filepath_xml_scan" DROP DEFAULT;
--
-- Alter field source on docket
--
-- (no-op)
--
-- Alter field source on docketevent
--
-- (no-op)
--
-- Alter field source on opinioncluster
--
-- (no-op)
--
-- Alter field source on opinionclusterevent
--
-- (no-op)
--
-- Add field opinion to opinioncontent
--
ALTER TABLE "search_opinioncontent" ADD COLUMN "opinion_id" integer NOT NULL CONSTRAINT "search_opinioncontent_opinion_id_c2bb5a87_fk_search_opinion_id" REFERENCES "search_opinion"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "search_opinioncontent_opinion_id_c2bb5a87_fk_search_opinion_id" IMMEDIATE;
CREATE INDEX "search_opinioncontent_date_created_07b21785" ON "search_opinioncontent" ("date_created");
CREATE INDEX "search_opinioncontent_date_modified_04c81b86" ON "search_opinioncontent" ("date_modified");
CREATE INDEX "search_opinioncontent_sha1_b21c7eaa" ON "search_opinioncontent" ("sha1");
CREATE INDEX "search_opinioncontent_sha1_b21c7eaa_like" ON "search_opinioncontent" ("sha1" varchar_pattern_ops);
CREATE INDEX "search_opinioncontent_download_url_973281dc" ON "search_opinioncontent" ("download_url");
CREATE INDEX "search_opinioncontent_download_url_973281dc_like" ON "search_opinioncontent" ("download_url" varchar_pattern_ops);
CREATE INDEX "search_opinioncontent_local_path_95c7f28a" ON "search_opinioncontent" ("local_path");
CREATE INDEX "search_opinioncontent_local_path_95c7f28a_like" ON "search_opinioncontent" ("local_path" varchar_pattern_ops);
CREATE INDEX "search_opinioncontent_opinion_id_c2bb5a87" ON "search_opinioncontent" ("opinion_id");
COMMIT;