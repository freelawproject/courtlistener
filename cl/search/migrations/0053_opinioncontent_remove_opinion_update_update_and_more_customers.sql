BEGIN;
--
-- Create model OpinionContent
--
CREATE TABLE "search_opinioncontent" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "content" text NOT NULL, "source" smallint NOT NULL, "extraction_type" smallint NOT NULL);
--
-- Add field xml_scanning to opinion
--
ALTER TABLE "search_opinion" ADD COLUMN "xml_scanning" text DEFAULT '' NOT NULL;
ALTER TABLE "search_opinion" ALTER COLUMN "xml_scanning" DROP DEFAULT;
--
-- Add field filepath_pdf_scan to opinioncluster
--
ALTER TABLE "search_opinioncluster" ADD COLUMN "filepath_pdf_scan" varchar(100) DEFAULT '' NOT NULL;
ALTER TABLE "search_opinioncluster" ALTER COLUMN "filepath_pdf_scan" DROP DEFAULT;
--
-- Add field filepath_xml_scan to opinioncluster
--
ALTER TABLE "search_opinioncluster" ADD COLUMN "filepath_xml_scan" varchar(100) DEFAULT '' NOT NULL;
ALTER TABLE "search_opinioncluster" ALTER COLUMN "filepath_xml_scan" DROP DEFAULT;
--
-- Alter field source on docket
--
-- (no-op)
--
-- Alter field source on docketevent
--
-- (no-op)
--
-- Alter field source on opinioncluster
--
-- (no-op)
--
-- Alter field source on opinionclusterevent
--
-- (no-op)
--
-- Add field opinion to opinioncontent
--
ALTER TABLE "search_opinioncontent" ADD COLUMN "opinion_id" integer NOT NULL CONSTRAINT "search_opinioncontent_opinion_id_c2bb5a87_fk_search_opinion_id" REFERENCES "search_opinion"("id") DEFERRABLE INITIALLY DEFERRED; SET CONSTRAINTS "search_opinioncontent_opinion_id_c2bb5a87_fk_search_opinion_id" IMMEDIATE;
CREATE INDEX "search_opinioncontent_date_created_07b21785" ON "search_opinioncontent" ("date_created");
CREATE INDEX "search_opinioncontent_date_modified_04c81b86" ON "search_opinioncontent" ("date_modified");
CREATE INDEX "search_opinioncontent_opinion_id_c2bb5a87" ON "search_opinioncontent" ("opinion_id");
COMMIT;
