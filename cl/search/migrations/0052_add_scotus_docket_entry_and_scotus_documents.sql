BEGIN;
--
-- Create model SCOTUSDocketEntry
--
CREATE TABLE "search_scotusdocketentry" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "entry_number" integer NULL, "description" text NOT NULL, "date_filed" date NULL, "sequence_number" varchar(16) NOT NULL, "docket_id" integer NOT NULL);
COMMENT ON COLUMN "search_scotusdocketentry"."entry_number" IS 'Entry number on the SCOTUS Docket page.';
COMMENT ON COLUMN "search_scotusdocketentry"."description" IS 'For appellate brief events, a short description of the brief.';
COMMENT ON COLUMN "search_scotusdocketentry"."date_filed" IS 'The date that TAMES indicates this entry was filed.';
COMMENT ON COLUMN "search_scotusdocketentry"."sequence_number" IS 'CL-generated field to keep entries in the same order they appear in TAMES. Concatenation of filing date (in ISO format) and the index in the TAMES table.';
COMMENT ON COLUMN "search_scotusdocketentry"."docket_id" IS 'The Docket this entry is associated with.';
--
-- Create model SCOTUSDocketEntryEvent
--
CREATE TABLE "search_scotusdocketentryevent" ("pgh_id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "pgh_created_at" timestamp with time zone NOT NULL, "pgh_label" text NOT NULL, "id" integer NOT NULL, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "entry_number" integer NULL, "description" text NOT NULL, "date_filed" date NULL, "sequence_number" varchar(16) NOT NULL, "docket_id" integer NOT NULL, "pgh_context_id" uuid NULL, "pgh_obj_id" integer NOT NULL);
COMMENT ON COLUMN "search_scotusdocketentryevent"."entry_number" IS 'Entry number on the SCOTUS Docket page.';
COMMENT ON COLUMN "search_scotusdocketentryevent"."description" IS 'For appellate brief events, a short description of the brief.';
COMMENT ON COLUMN "search_scotusdocketentryevent"."date_filed" IS 'The date that TAMES indicates this entry was filed.';
COMMENT ON COLUMN "search_scotusdocketentryevent"."sequence_number" IS 'CL-generated field to keep entries in the same order they appear in TAMES. Concatenation of filing date (in ISO format) and the index in the TAMES table.';
COMMENT ON COLUMN "search_scotusdocketentryevent"."docket_id" IS 'The Docket this entry is associated with.';
--
-- Create model SCOTUSDocument
--
CREATE TABLE "search_scotusdocument" ("id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "sha1" varchar(40) NOT NULL, "page_count" integer NULL, "file_size" integer NULL, "filepath_local" varchar(1000) NOT NULL, "filepath_ia" varchar(1000) NOT NULL, "ia_upload_failure_count" smallint NULL, "thumbnail" varchar(100) NULL, "thumbnail_status" smallint NOT NULL, "plain_text" text NOT NULL, "ocr_status" smallint NULL, "description" text NOT NULL, "document_number" integer NULL, "attachment_number" smallint NULL, "document_url" varchar(200) NOT NULL, "docket_entry_id" integer NOT NULL);
COMMENT ON COLUMN "search_scotusdocument"."description" IS 'The description of this file in SCOTUS.';
COMMENT ON COLUMN "search_scotusdocument"."document_number" IS 'The document number on the docket page in SCOTUS.';
COMMENT ON COLUMN "search_scotusdocument"."attachment_number" IS 'The attachment number on the docket page in SCOTUS.';
COMMENT ON COLUMN "search_scotusdocument"."document_url" IS 'The download URL that SCOTUS provided for this document.';
COMMENT ON COLUMN "search_scotusdocument"."docket_entry_id" IS 'The Docket this document is associated with.';
--
-- Create model SCOTUSDocumentEvent
--
CREATE TABLE "search_scotusdocumentevent" ("pgh_id" integer NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "pgh_created_at" timestamp with time zone NOT NULL, "pgh_label" text NOT NULL, "id" integer NOT NULL, "date_created" timestamp with time zone NOT NULL, "date_modified" timestamp with time zone NOT NULL, "sha1" varchar(40) NOT NULL, "page_count" integer NULL, "file_size" integer NULL, "filepath_local" varchar(1000) NOT NULL, "filepath_ia" varchar(1000) NOT NULL, "ia_upload_failure_count" smallint NULL, "thumbnail" varchar(100) NULL, "thumbnail_status" smallint NOT NULL, "plain_text" text NOT NULL, "ocr_status" smallint NULL, "description" text NOT NULL, "document_number" integer NULL, "attachment_number" smallint NULL, "document_url" varchar(200) NOT NULL, "docket_entry_id" integer NOT NULL, "pgh_context_id" uuid NULL, "pgh_obj_id" integer NOT NULL);
COMMENT ON COLUMN "search_scotusdocumentevent"."description" IS 'The description of this file in SCOTUS.';
COMMENT ON COLUMN "search_scotusdocumentevent"."document_number" IS 'The document number on the docket page in SCOTUS.';
COMMENT ON COLUMN "search_scotusdocumentevent"."attachment_number" IS 'The attachment number on the docket page in SCOTUS.';
COMMENT ON COLUMN "search_scotusdocumentevent"."document_url" IS 'The download URL that SCOTUS provided for this document.';
COMMENT ON COLUMN "search_scotusdocumentevent"."docket_entry_id" IS 'The Docket this document is associated with.';
--
-- Create index search_scot_documen_52ca5b_idx on field(s) document_number of model scotusdocument
--
CREATE INDEX "search_scot_documen_52ca5b_idx" ON "search_scotusdocument" ("document_number");
--
-- Create index search_scot_filepat_275078_idx on field(s) filepath_local of model scotusdocument
--
CREATE INDEX "search_scot_filepat_275078_idx" ON "search_scotusdocument" ("filepath_local");
--
-- Alter unique_together for scotusdocument (1 constraint(s))
--
ALTER TABLE "search_scotusdocument" ADD CONSTRAINT "search_scotusdocument_docket_entry_id_document_98262419_uniq" UNIQUE ("docket_entry_id", "document_number", "attachment_number");

ALTER TABLE "search_scotusdocketentry" ADD CONSTRAINT "search_scotusdocketentry_docket_id_278b65bd_fk_search_docket_id" FOREIGN KEY ("docket_id") REFERENCES "search_docket" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "search_scotusdocketentry_date_created_23c95d37" ON "search_scotusdocketentry" ("date_created");
CREATE INDEX "search_scotusdocketentry_date_modified_5afcdefe" ON "search_scotusdocketentry" ("date_modified");
CREATE INDEX "search_scotusdocketentry_docket_id_278b65bd" ON "search_scotusdocketentry" ("docket_id");
CREATE INDEX "search_scotusdocketentryevent_docket_id_5e4819f0" ON "search_scotusdocketentryevent" ("docket_id");
CREATE INDEX "search_scotusdocketentryevent_pgh_context_id_3cd566f1" ON "search_scotusdocketentryevent" ("pgh_context_id");
CREATE INDEX "search_scotusdocketentryevent_pgh_obj_id_d52ba588" ON "search_scotusdocketentryevent" ("pgh_obj_id");
ALTER TABLE "search_scotusdocument" ADD CONSTRAINT "search_scotusdocumen_docket_entry_id_d3b57cea_fk_search_sc" FOREIGN KEY ("docket_entry_id") REFERENCES "search_scotusdocketentry" ("id") DEFERRABLE INITIALLY DEFERRED;
CREATE INDEX "search_scotusdocument_date_created_40cf887b" ON "search_scotusdocument" ("date_created");
CREATE INDEX "search_scotusdocument_date_modified_80303039" ON "search_scotusdocument" ("date_modified");
CREATE INDEX "search_scotusdocument_docket_entry_id_d3b57cea" ON "search_scotusdocument" ("docket_entry_id");
CREATE INDEX "search_scotusdocumentevent_docket_entry_id_84869dd4" ON "search_scotusdocumentevent" ("docket_entry_id");
CREATE INDEX "search_scotusdocumentevent_pgh_context_id_9349fa58" ON "search_scotusdocumentevent" ("pgh_context_id");
CREATE INDEX "search_scotusdocumentevent_pgh_obj_id_4d7f8b6f" ON "search_scotusdocumentevent" ("pgh_obj_id");
COMMIT;
